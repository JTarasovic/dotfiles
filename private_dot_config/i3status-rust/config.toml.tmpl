# vi:syntax=toml

{{ $headphone_mac := output
    ( joinPath .chezmoi.sourceDir "helpers" "bluetooth-device-paired.sh")
    "Bose NC 700 Head" -}}

[theme]
file = "nord-dark.toml"

[icons]
name = "awesome"

[[block]]
block = "custom"
interval = "once"
signal = 1
command = ''' current-context '''

[[block]]
block = "music"
max_width = 100
dynamic_width = true
buttons = [ "play" ]

{{ if $headphone_mac -}}
[[block]]
block = "bluetooth"
mac = {{ $headphone_mac | quote }}
label = " Bose NC700"
format = "{label}"
{{- else -}}
# skipped Bose NC700
{{- end }}

[[block]]
block = "sound"
on_click = 'pactl set-sink-mute @DEFAULT_SINK@ toggle'

[[block]]
block = "sound"
device_kind = 'source'
on_click = 'pactl set-source-mute @DEFAULT_SOURCE@ toggle'

[[block]]
block = "weather"
format = "{weather} {temp}"
service = { name = "openweathermap", api_key = "{{ .openweathermap.api_key }}", city_id = "4377664", units = "imperial" }
interval = 900

[[block]]
block = "time"
interval = 60
format = "%a %b %d %R"

# [[block]]
# block = "custom"
# interval = "once"
# command = ''' printf "%s@%s" {{ .chezmoi.username }} {{ .chezmoi.fqdnHostname }} '''

[[block]]
block = "custom"
command = "browsers GET"
on_click = "browsers CYCLE"
interval = "once"
signal = 2

[[block]]
block = "notify"

[[block]]
block = "custom"
command = "echo \uf011"
on_click = "powermenu"
interval = "once"
